<!DOCTYPE html>
<html ng-app="GeolinkClient">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <title>Geolink</title>

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.tmp) styles/main.css -->

    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="bower_components/jassa-ui-angular/jassa-ui-angular.css" />
    <!-- endbower -->

    <!--<link rel="stylesheet" href="../../../target/release/repo/jassa-ui-angular.css" />-->

    <!-- endbuild -->

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.js"></script>
    <!--     <script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-sanitize.js"></script> -->

    <!-- build:js scripts/scripts.js -->

    <!--<script src="bower_components/jscache/cache.js"></script> -->

    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/dddi-angular/dddi-angular.js"></script>
    <script src="bower_components/bluebird/js/browser/bluebird.js"></script>
    <script src="bower_components/jassa/jassa.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/angular-ui-bootstrap-bower/ui-bootstrap-tpls.js"></script>
    <script src="bower_components/angular-sanitize/angular-sanitize.js"></script>
    <script src="bower_components/jquery-ui/ui/jquery-ui.js"></script>
    <script src="bower_components/angular-ui-sortable/sortable.js"></script>
    <script src="bower_components/angular-ui-utils/ui-utils.js"></script>
    <script src="bower_components/jassa-ui-angular/jassa-ui-angular-tpls.js"></script>
    <script src="bower_components/underscore/underscore.js"></script>
    <script src="bower_components/jassa-ui-angular-openlayers/jassa-ui-angular-openlayers-tpls.js"></script>
    <!-- endbower -->

    <!--     <script src="scripts/lib/angular-ui/0.10.0/ui-bootstrap-tpls-0.10.0.js"></script> -->
    <!--     <script src="bower_components/underscore.string/lib/underscore.string.js"></script> -->

    <script src="bower_components/openlayers/lib/OpenLayers.js"></script>

    <!-- endbuild -->

    <script type="text/ng-template" id="predicateGroup.html">

        <td>
            <!--
            <a href="" ng-click="node.isExpanded = !node.isExpanded">
                <span class="glyphicon" ng-class="{'glyphicon-chevron-down' : node.isExpanded, 'glyphicon-chevron-right' : !node.isExpanded}"></span>
            </a>
            {{node.displayLabel}}
            -->
        </td>
        <td>
            <ul>
                <li ng-repeat="member in node.members">
                    <span title={{member.value.id}}>{{member.value.displayLabel}}</span>
                    (<span title={{member.predicate.id}}>{{member.predicate.displayLabel}}</span>)
                </li>
            </ul>
        </td>

    </script>

    <!--             <table ng-show="node.isExpanded"> -->
    <!--                 <tr ng-repeat="node in node.children" ng-include="'predicateGroup.html'"></tr> -->
    <!--             </table> -->

    <script type="text/javascript">
        //     _.mixin(_.str.exports());

        jassa = new Jassa(Promise, function () {
            jqXHR = $.ajax.apply(this, arguments);
            r = Promise.resolve(jqXHR)
                    .cancellable()
                    .catch(Promise.TimeoutError, Promise.CancellationError, function (e) {
                        //console.log('CANCELLED REQUEST');
                        jqXHR.abort();
                        throw e;
                    });
            return r;
        });



    </script>

</head>

<body ng-controller="AppCtrl">
    <div jassa-map-ol="map" style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%" config="mapConfig" data-sources="dataSources" select="selectGeom(data)"></div>

    <!--
    <div style="position: absolute; bottom: 10px; left: 10px; right: 10px; height: 300px; overflow: auto; background-color: #fefefe">

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Attribute</th>
                    <th>Values</th>
                </tr>
            </thead>

            <thead ng-repeat-start="link in diff">
                <tr>
                    <td style="font-style: italic;" colspan="2">
                        <a href="" ng-click="link.isExpanded = !link.isExpanded">
                            <span class="glyphicon" ng-class="{'glyphicon-chevron-down' : link.isExpanded, 'glyphicon-chevron-right' : !link.isExpanded}"></span>
                        </a>
                        <span title="{{link.id}}">{{link.displayLabel}}</span>
                        <span title="{{link.source.id}}">{{link.source.displayLabel}}</span>
                        <span title="{{link.target.id}}">{{link.target.displayLabel}}</span>
                    </td>
                </tr>
            </thead>
            <tbody ng-repeat-end ng-show="link.isExpanded">
                <tr ng-repeat="node in link.predicateGroups" ng-include="'predicateGroup.html'"></tr>
            </tbody>
        </table>
    </div>
    -->


    <button ng-click="setLeipzig();" style="position: absolute; right: 10px; top: 10px;">Set Leipzig</button >
    <button ng-click="setDenver();" style="position: absolute; right: 10px; top: 40px;">Set Denver</button>
    <button ng-click="sendLinkSpec();" style="position: absolute; right: 10px; top: 90px;">Send LinkSpec</button>
    <button ng-click="logDatasources();" style="position: absolute; right: 10px; top: 140px;">[DEBUG] log datasources to console</button>

    <!-- Modules -->
    <script src="scripts/js/app.js"></script>

    <!-- Controllers -->
    <script src="scripts/js/controllers/MainController.js"></script>

    <!-- Directives -->
    <!--
    <script src="scripts/js/directives/myInit.js"></script>
    <script src="scripts/js/directives/pullUp.js"></script>
    -->
    <!-- Services -->
    
	<!-- GUI --> 
    <script>
		app.controller('CollapseCtrl', function($scope) {
			$scope.isCollapsed1 = true;
			$scope.isCollapsed2 = false;
			$scope.isCollapsed3 = true;
			$scope.isCollapsed4 = true;
			});
		app.controller('AccordionCtrl', function ($scope) {
			  $scope.oneAtATime = false;
			  $scope.status = {
			    isFirstOpen: true,
			    isFirstDisabled: false,	
			  };
			});
		app.controller('DropdownCtrl', function ($scope, $log) {
			  $scope.items = [
			    'SPARQL12',
			    'SPARQL2',
			    'SPARQL3'
			  ];

			  $scope.status = {
			    isopen: false
			  };

			  $scope.toggled = function(open) {
			    $log.log('Dropdown is now: ', open);
			  };2

			  $scope.toggleDropdown = function($event) {
			    $event.preventDefault();
			    $event.stopPropagation();
			    $scope.status.isopen = !$scope.status.isopen;
			  };
			  
			  $scope.options = [{ name: "SPARQL1", id: 1 },
			                    { name: "SPARQL2", id: 2 },
			                    { name: "SPARQL3", id: 3 },];
			  $scope.selectedOption = $scope.options[0];
			});
	</script>
	
	<div ng-controller="CollapseCtrl" style="position: absolute">
		<button class="btn btn-default" ng-click="isCollapsed1 = !isCollapsed1">Toggle Menu</button>
		
		<div collapse="isCollapsed1">
			<div class="well well-lg">
				<div collapse="isCollapsed2">
					<div class="well well-lg">
						Session Menu 
						<br><br>
						<button disabled = "true" class="btn btn-default" ng-click="isCollapsed3 = true; isCollapsed2 = false">Previous</button>
						<button class="btn btn-default" ng-click="isCollapsed2 = true; isCollapsed3 = false">Next</button>
						<br>
					</div>
				</div>
				<div collapse="isCollapsed3">
					<div class="well well-lg">
						LinkSpec Menu 
						<br><br>
						<button class="btn btn-default" ng-click="isCollapsed3 = true; isCollapsed2 = false">Previous</button>
						<button class="btn btn-default" ng-click="isCollapsed3 = true; isCollapsed4 = false">Next</button>
						<br>
					</div>
				</div>
				<div collapse="isCollapsed4">
					<div class="well well-lg">
						Geomize Menu 
						<br><br>
						<button class="btn btn-default" ng-click="isCollapsed4 = true; isCollapsed3 = false">Previous</button>
						<button disabled = "true" class="btn btn-default" ng-click="isCollapsed3 = true; isCollapsed4 = false">Next</button>
						<br>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div ng-controller="AccordionCtrl" style="position: absolute; top: 220px">
	  <accordion close-others="oneAtATime">
	    <accordion-group heading="Session Menu" is-open="status.isFirstOpen" is-disabled="status.isFirstDisabled">
	      Session Stuff Here
	    </accordion-group>
	    <accordion-group heading="LinkSpec Creation" is-open="status.isFirstOpen">
			<h>LinkSpec Stuff Here </h> 
			<br><br>
			<div ng-controller="DropdownCtrl">
			    <div class="btn-group" dropdown is-open="status.isopen">
			      <button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle ng-disabled="disabled">
			        Source <span class="caret"></span>
			      </button>
			      <ul class="dropdown-menu" role="menu">
			        <li><a href="#">SPARQL 1</a></li>
			        <li><a href="#">SPARQL 2</a></li>
			        <li><a href="#">SPARQL 3</a></li>
			      </ul>
			    </div>
			    <select class="btn-group" data-ng-options="o.name for o in options" data-ng-model="selectedOption"></select>
			</div> 
	    </accordion-group>
	    <accordion-group heading="Other Stuff" is-open="status.isFirstOpen">
	      <p>The body of the accordion group grows to fit the contents--------------------------</p>
 
	    </accordion-group>
	  </accordion>
	</div>   
    
</body>

</html>

